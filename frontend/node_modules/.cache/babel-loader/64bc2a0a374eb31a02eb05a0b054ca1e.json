{"ast":null,"code":"import _objectSpread from\"C:/Users/binel/OneDrive/Desktop/React Projects/todo_list_ReactJs/todolist/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/binel/OneDrive/Desktop/React Projects/todo_list_ReactJs/todolist/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/binel/OneDrive/Desktop/React Projects/todo_list_ReactJs/todolist/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/binel/OneDrive/Desktop/React Projects/todo_list_ReactJs/todolist/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';// import notes from '../assets/data'\nimport{useParams,useNavigate}from'react-router-dom';import{Link}from'react-router-dom';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(){var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();// let note = notes.find(note => note.id === Number(id))\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[id]);var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(id==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"http://localhost:8000/notes/\".concat(id));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:8000/notes/\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(_objectSpread(_objectSpread({},note),{},{'updated':new Date()}))});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function createNote(){return _ref2.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"http://localhost:8000/notes/\".concat(id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(_objectSpread(_objectSpread({},note),{},{'updated':new Date()}))});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function updateNote(){return _ref3.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"http://localhost:8000/notes/\".concat(id),{method:'DELETE',headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 2:navigate('/');case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(){return _ref4.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(id!=='new'&&!note.body){deleteNote();}else if(id!==\"new\"){updateNote();}else if(id==='new'&&note!==null){createNote();}navigate('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})})}),id!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){setNote(_objectSpread(_objectSpread({},note),{},{'body':e.target.value}));},placeholder:\"Edit note\",value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","ReactComponent","ArrowLeft","NotePage","id","navigate","note","setNote","getNote","fetch","response","json","data","createNote","method","headers","body","JSON","stringify","Date","updateNote","deleteNote","handleSubmit","e","target","value"],"sources":["C:/Users/binel/OneDrive/Desktop/React Projects/todo_list_ReactJs/todolist/src/pages/NotePage.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\n// import notes from '../assets/data'\r\nimport { useParams, useNavigate } from 'react-router-dom'\r\nimport { Link } from 'react-router-dom'\r\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg'\r\n\r\nconst NotePage = () => {\r\n    let {id} = useParams();\r\n    let navigate = useNavigate();\r\n    // let note = notes.find(note => note.id === Number(id))\r\n    let [note, setNote] = useState(null)\r\n    \r\n    useEffect(() => {\r\n        getNote()\r\n    },[id])\r\n\r\n    let getNote = async () => {\r\n        if (id === 'new') return\r\n        let response = await fetch(`http://localhost:8000/notes/${id}`)\r\n        let data = await response.json()\r\n        setNote(data)\r\n    }\r\n\r\n    let createNote = async () => {\r\n        await fetch(`http://localhost:8000/notes/`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ ...note, 'updated': new Date() })\r\n        })\r\n    }\r\n\r\n    let updateNote = async () => {\r\n        await fetch(`http://localhost:8000/notes/${id}`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ ...note, 'updated': new Date() })\r\n        })\r\n    }\r\n\r\n    let deleteNote = async () => {\r\n        await fetch(`http://localhost:8000/notes/${id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(note)\r\n        })\r\n        navigate('/')\r\n    }\r\n\r\n    let handleSubmit = () => {\r\n        if (id !== 'new' && !note.body) {\r\n            deleteNote()\r\n        } else if (id !== \"new\") {\r\n            updateNote()\r\n        } else if (id === 'new' && note !== null) {\r\n            createNote()\r\n        }\r\n        navigate('/')\r\n    }\r\n\r\n    return (\r\n        <div className='note'>\r\n            <div className='note-header'>\r\n                <h3>\r\n                    <Link to =\"/\" >\r\n                        <ArrowLeft onClick={handleSubmit} />\r\n                    </Link>\r\n                </h3>\r\n                {id !== 'new' ? (\r\n                    <button onClick={deleteNote}>Delete</button>\r\n                ): (\r\n                    <button onClick={handleSubmit}>Done</button>\r\n                )}\r\n            </div>\r\n            <textarea onChange={(e) => {setNote({...note, 'body': e.target.value})}} placeholder=\"Edit note\" value={note?.body}></textarea>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NotePage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}